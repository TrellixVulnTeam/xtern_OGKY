diff -ruN ImageMagick-6.8.0-4/magick/effect.c ImageMagick-6.8.0-4-modified/magick/effect.c
--- ImageMagick-6.8.0-4/magick/effect.c	2012-10-12 09:48:45.000000000 -0400
+++ ImageMagick-6.8.0-4-modified/magick/effect.c	2012-12-30 00:37:26.943580451 -0500
@@ -87,6 +87,7 @@
 #include "magick/thread-private.h"
 #include "magick/transform.h"
 #include "magick/threshold.h"
+#include "tern/user.h"
 
 /*
 %%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
@@ -1467,6 +1468,8 @@
       }
     indexes=GetCacheViewVirtualIndexQueue(image_view);
     convolve_indexes=GetCacheViewAuthenticIndexQueue(convolve_view);
+    tern_lineup_start(0);
+    tern_lineup_end(0);
     for (x=0; x < (ssize_t) image->columns; x++)
     {
       MagickPixelPacket
diff -ruN ImageMagick-6.8.0-4/magick/magick.c ImageMagick-6.8.0-4-modified/magick/magick.c
--- ImageMagick-6.8.0-4/magick/magick.c	2012-01-17 22:01:56.000000000 -0500
+++ ImageMagick-6.8.0-4-modified/magick/magick.c	2012-12-30 00:34:45.271586227 -0500
@@ -79,6 +79,7 @@
 #include "magick/token.h"
 #include "magick/utility.h"
 #include "magick/xwindow-private.h"
+#include "tern/user.h"
 
 /*
   Define declarations.
@@ -1216,6 +1217,7 @@
     *events,
     execution_path[MaxTextExtent],
     filename[MaxTextExtent];
+  tern_lineup_init(0, 4, 100);
 
   /*
     Initialize the Magick environment.
