diff -ruN parsec-3.0-orig/ext/splash2x/apps/fmm/src/box.C parsec-3.0-modified/ext/splash2x/apps/fmm/src/box.C
--- parsec-3.0-orig/ext/splash2x/apps/fmm/src/box.C	2013-02-19 00:53:56.073531457 -0500
+++ parsec-3.0-modified/ext/splash2x/apps/fmm/src/box.C	2013-02-20 22:04:51.779711585 -0500
@@ -20,6 +20,7 @@
 #include "memory.h"
 #include "particle.h"
 #include "box.h"
+#include "tern/user.h"
 
 /* How many boxes can fit on one line */
 #define BOXES_PER_LINE 4
@@ -79,7 +80,6 @@
    Local[my_id].Index_B_Heap = 0;
 }
 
-
 void
 ZeroBox (long my_id, box *b)
 {
@@ -102,6 +102,9 @@
    b->subtree_cost = 0;
    b->next = NULL;
    b->prev = NULL;
+   tern_non_det_start();
+   PAUSEINIT(b->pause)
+   tern_non_det_end();
 }
 
 
diff -ruN parsec-3.0-orig/ext/splash2x/apps/fmm/src/fmm.C parsec-3.0-modified/ext/splash2x/apps/fmm/src/fmm.C
--- parsec-3.0-orig/ext/splash2x/apps/fmm/src/fmm.C	2013-02-19 00:53:56.073531457 -0500
+++ parsec-3.0-modified/ext/splash2x/apps/fmm/src/fmm.C	2013-02-20 22:09:02.003702632 -0500
@@ -79,6 +79,7 @@
 #include "cost_zones.h"
 #include "construct_grid.h"
 #include "interactions.h"
+#include "tern/user.h"
 
 #ifdef ENABLE_PARSEC_HOOKS
 #include <hooks.h>
@@ -149,6 +150,9 @@
 #ifdef ENABLE_PARSEC_HOOKS
 	__parsec_roi_begin();
 #endif
+   tern_lineup_init(0, Number_Of_Processors, 20*Number_Of_Processors);
+   tern_lineup_init(1, Number_Of_Processors, 20*Number_Of_Processors);
+   tern_lineup_init(2, Number_Of_Processors, 20*Number_Of_Processors); 
    CREATE(ParallelExecute, Number_Of_Processors);
    WAIT_FOR_END(Number_Of_Processors);
 #ifdef ENABLE_PARSEC_HOOKS
@@ -289,16 +293,22 @@
 
    if (time_all)
       CLOCK(start);
+   tern_lineup(0);
+   tern_non_det_start();
    PartitionIterate(my_id, UpwardPass, BOTTOM);
    if (time_all)
       CLOCK(upward_end);
    PartitionIterate(my_id, ComputeInteractions, BOTTOM);
+     tern_non_det_end();
    if (time_all)
       CLOCK(interaction_end);
    BARRIER(G_Memory->synch, Number_Of_Processors);
    if (time_all)
       CLOCK(barrier_end);
+   tern_non_det_start();
    PartitionIterate(my_id, DownwardPass, TOP);
+   tern_non_det_end();
+   tern_lineup(1);
    if (time_all)
       CLOCK(downward_end);
    PartitionIterate(my_id, ComputeParticlePositions, CHILDREN);
diff -ruN parsec-3.0-orig/ext/splash2x/apps/fmm/src/memory.C parsec-3.0-modified/ext/splash2x/apps/fmm/src/memory.C
--- parsec-3.0-orig/ext/splash2x/apps/fmm/src/memory.C	2013-02-19 00:53:56.073531457 -0500
+++ parsec-3.0-modified/ext/splash2x/apps/fmm/src/memory.C	2013-02-20 22:05:00.195711282 -0500
@@ -33,6 +33,7 @@
  *  Side Effects : Allocates all the global storage for G_Memory.
  *
  */
+#include "tern/user.h"
 void
 InitGlobalMemory ()
 {
@@ -49,7 +50,9 @@
    LOCKINIT(G_Memory->mal_lock);
    LOCKINIT(G_Memory->single_lock);
    LOCKINIT(G_Memory->count_lock);
+   tern_non_det_start();
    ALOCKINIT(G_Memory->lock_array, MAX_LOCKS);
+   tern_non_det_end();
    BARINIT(G_Memory->synch, Number_Of_Processors);
    G_Memory->max_x = -MAX_REAL;
    G_Memory->min_x = MAX_REAL;
